{
  "appConfig": {},
  "expectedArtifacts": [
    {
      "defaultArtifact": {
        "id": "93a660bf-72ee-4052-b2e2-4dad2ec3b7ab",
        "name": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-deployment.yaml",
        "reference": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-deployment.yaml",
        "type": "s3/object"
      },
      "displayName": "s3--quality-deployment.yaml",
      "id": "431d6f14-1dc1-424e-9e63-742fbdd42207",
      "matchArtifact": {
        "id": "6ada984a-1aee-41d5-90a1-d5044ca66d37",
        "name": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-deployment.yaml",
        "type": "s3/object"
      },
      "useDefaultArtifact": true,
      "usePriorArtifact": false
    },
    {
      "defaultArtifact": {
        "id": "cb53e778-f717-4413-9fdb-4c4499c04a08",
        "name": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-service.yaml",
        "reference": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-service.yaml",
        "type": "s3/object"
      },
      "displayName": "s3--quality-service.yaml",
      "id": "11e124a1-a98c-4312-b737-ba1d93df7664",
      "matchArtifact": {
        "id": "6ef90be4-7950-447f-9845-0de831ddae8a",
        "name": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-service.yaml",
        "type": "s3/object"
      },
      "useDefaultArtifact": true,
      "usePriorArtifact": false
    },
    {
      "defaultArtifact": {
        "id": "548d95a4-e262-4bf6-adbb-3bfdf4cde122",
        "name": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-service-final.yaml",
        "reference": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-service-final.yaml",
        "type": "s3/object"
      },
      "displayName": "s3--quality-service-final.yaml",
      "id": "54c15519-c4a6-42d1-a17f-f63fb4356ced",
      "matchArtifact": {
        "id": "a966775a-30dd-44fd-a2b4-5284abb3a012",
        "name": "s3://spin-airqt-release/${parameters['bno']}/quality/quality-service-final.yaml",
        "type": "s3/object"
      },
      "useDefaultArtifact": true,
      "usePriorArtifact": false
    }
  ],
  "keepWaitingPipelines": false,
  "lastModifiedBy": "anonymous",
  "limitConcurrent": true,
  "parameterConfig": [
    {
      "description": "build number from Travis CI",
      "label": "build number",
      "name": "bno",
      "required": true
    },
    {
      "default": "true",
      "description": "Automating the whole pipeline without judgement if it's true.",
      "label": "auto",
      "name": "auto"
    }
  ],
  "stages": [
    {
      "account": "aqt-test-k8s-v2-account",
      "cloudProvider": "kubernetes",
      "expectedArtifacts": [],
      "manifestArtifactAccount": "artifacts-s3-account",
      "manifestArtifactId": "431d6f14-1dc1-424e-9e63-742fbdd42207",
      "moniker": {
        "app": "airqt-ab"
      },
      "name": "Apply deployment",
      "refId": "1",
      "relationships": {
        "loadBalancers": [],
        "securityGroups": []
      },
      "requisiteStageRefIds": [],
      "skipExpressionEvaluation": false,
      "source": "artifact",
      "type": "deployManifest"
    },
    {
      "failPipeline": true,
      "judgmentInputs": [],
      "name": "Wait approval to A/B",
      "notifications": [],
      "refId": "3",
      "requisiteStageRefIds": [
        "5"
      ],
      "stageEnabled": {
        "expression": "${#toBoolean(parameters['auto']) == true}",
        "type": "expression"
      },
      "type": "manualJudgment"
    },
    {
      "account": "aqt-test-k8s-v2-account",
      "cloudProvider": "kubernetes",
      "manifestArtifactAccount": "artifacts-s3-account",
      "manifestArtifactId": "11e124a1-a98c-4312-b737-ba1d93df7664",
      "moniker": {
        "app": "airqt-ab"
      },
      "name": "Apply service",
      "refId": "4",
      "relationships": {
        "loadBalancers": [],
        "securityGroups": []
      },
      "requisiteStageRefIds": [
        "1"
      ],
      "skipExpressionEvaluation": false,
      "source": "artifact",
      "type": "deployManifest"
    },
    {
      "account": "aqt-test-k8s-v2-account",
      "cloudProvider": "kubernetes",
      "expectedArtifacts": [],
      "manifestArtifactAccount": "artifacts-s3-account",
      "manifestArtifactId": "54c15519-c4a6-42d1-a17f-f63fb4356ced",
      "moniker": {
        "app": "airqt-ab"
      },
      "name": "Apply final-service",
      "refId": "5",
      "relationships": {
        "loadBalancers": [],
        "securityGroups": []
      },
      "requisiteStageRefIds": [
        "4"
      ],
      "skipExpressionEvaluation": false,
      "source": "artifact",
      "type": "deployManifest"
    },
    {
      "account": "aqt-test-k8s-v2-account",
      "app": "airqt-ab",
      "cloudProvider": "kubernetes",
      "kinds": [
        "service",
        "deployment"
      ],
      "labelSelectors": {
        "selectors": [
          {
            "key": "cbr",
            "kind": "EQUALS",
            "values": [
              "can-be-removed"
            ]
          },
          {
            "key": "bn",
            "kind": "NOT_EQUALS",
            "values": [
              "bn-${parameters['bno']}"
            ]
          }
        ]
      },
      "location": "air-quality-tracker",
      "mode": "label",
      "name": "Destroy old service",
      "options": {
        "cascading": true
      },
      "refId": "7",
      "requisiteStageRefIds": [
        "8"
      ],
      "type": "deleteManifest"
    },
    {
      "account": "aqt-test-k8s-v2-account",
      "app": "airqt-ab",
      "cloudProvider": "kubernetes",
      "location": "air-quality-tracker",
      "manifestArtifactAccount": "cc4i-github-artifact-account",
      "manifestName": "service quality-service",
      "mode": "static",
      "name": "Patch  Service",
      "options": {
        "mergeStrategy": "strategic",
        "record": true
      },
      "patchBody": {
        "spec": {
          "selector": {
            "app": "quality-${parameters['bno']}"
          }
        }
      },
      "refId": "8",
      "requisiteStageRefIds": [
        "3"
      ],
      "source": "text",
      "type": "patchManifest"
    }
  ],
  "triggers": [],
  "updateTs": "1557594963000"
}